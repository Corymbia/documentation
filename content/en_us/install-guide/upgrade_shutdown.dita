<?xml version="1.0" encoding="UTF-8"?>
<!--This work by Eucalyptus Systems is licensed under a Creative Commons Attribution-ShareAlike 3.0 Unported License. See the accompanying LICENSE file for more information.-->
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="upgrade_shutdown">
    <title>Shutdown Services</title>
    <shortdesc>This topic describes how to stop all Eucalyptus services.</shortdesc>
	<taskbody>
		<!--    If there are no prereqs, state "None." -->        
		<prereq><b>Prerequisites</b>
			<p>See <xref href="upgrade_prep.dita#upgrade_prep"/> for the complete list of upgrade
				prerequisites.</p>
		</prereq>        
		<!--    This "To ... " context states what we are trying to accomplish via the steps in this task. -->        
	<context>
		<p>The steps you take depend upon where Eucalyptus services are hosted.</p>
		<p><b>To shut down Eucalyptus services</b></p>
	</context>
	<steps>
			<step>
				<cmd>Log in to the CLC host machine and shut down the CLC service:</cmd>
				<info><codeblock>systemctl stop eucalyptus-cloud.service</codeblock></info>
			</step>
			<step>
				<cmd>(Optional) If you have a separate SC host machine, log in and shut down the SC service:</cmd>
				<info><codeblock>systemctl stop eucalyptus-cloud.service</codeblock>
				</info>
			</step>
			<step>
				<cmd>(Optional) If you have a separate Walrus host machine, log in and shut down the Walrus service:</cmd>
				<info><codeblock>systemctl stop eucalyptus-cloud.service</codeblock></info>
			</step>
		<step>
			<cmd>(Optional) If you have a separate UFS host machine, log in and shut down the UFS services:</cmd>
			<info><codeblock>systemctl stop eucalyptus-cloud.service</codeblock></info>
		</step>
			<step>
				<cmd>(Optional) If there are any other Eucalyptus services (for example Walrus, SC, UFS)
					co-located on the CC host machine, use this command to shut down the other
					services on the CC host, and in the correct order:</cmd>
				<info><codeblock>systemctl stop eucalyptus-cloud.service</codeblock>
				</info>
			</step>
			<step>
				<cmd>Log in to each CC host machine and shut down the CC service:</cmd>
				<info><codeblock>systemctl stop eucalyptus-cc.service</codeblock>
				</info>
			</step>
		<step>
			<cmd>Log in to each NC host machine and shut down eucanetd:</cmd>
			<info>
				<codeblock>systemctl stop eucanetd.service</codeblock>
			</info>
		</step>
		<step>
			<cmd>Also on each NC, shut down the NC service:</cmd>
			<info><codeblock>systemctl stop eucalyptus-nc.service</codeblock>
					<note>Running instances on the NC will continue running. For more information see <xref
							href="upgrade.dita#upgrade/warm_upgrade">Warm Upgrade</xref>.</note>
				</info>
		</step>
		<step>
			<cmd>Log in to each Management Console host machine and shut down the console service:</cmd>
			<info>
				<codeblock>systemctl stop eucaconsole.service</codeblock>
				<p>For more information, see <xref
							href="../shared/console_upgrade_console.dita#console_upgrade_console"
						/>.</p>
			</info>
		</step>
	</steps>
    	<postreq>You are now ready to <xref href="upgrade_euca2ools_packages.dita"/>.</postreq>
    </taskbody>

</task>
